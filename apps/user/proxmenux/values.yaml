ingress:
  enabled: true
  ingressClassName: traefik
  annotations:
    kubernetes.io/ingress.class: traefik
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  host: menux.m0sh1.cc
  tlsSecretName: wildcard-m0sh1-cc

forwardAuth:
  # Authentik embedded proxy outpost (forward auth endpoint).
  # Use the protected app host as the outpost endpoint so Authentik can build
  # the correct redirect_uri/callback for this app.
  # See pattern in apps/user/pgadmin4/templates/authentik-outpost.ingress.yaml
  address: https://menux.m0sh1.cc/outpost.goauthentik.io/auth/traefik
  trustForwardHeader: true
  authResponseHeaders:
  - X-authentik-uid
  - X-authentik-username
  - X-authentik-email
  - X-authentik-name

backend:
  port: 8008
  # ProxMenux Monitor nodes (external targets).
  nodes:
  - name: pve01
    ip: 10.0.0.11
  - name: pve02
    ip: 10.0.0.12
  - name: pve03
    ip: 10.0.0.13

proxy:
  image:
    repository: dhi.io/haproxy
    tag: "3.3.2-debian13"
    pullPolicy: IfNotPresent
  replicas: 2
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 64Mi
