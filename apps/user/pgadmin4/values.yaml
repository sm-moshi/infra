pgadmin4:
  replicaCount: 1
  revisionHistoryLimit: 1

  ingress:
    enabled: true
    className: traefik
    annotations:
      kubernetes.io/ingress.class: traefik
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      traefik.ingress.kubernetes.io/router.tls: "true"
      # external-dns.alpha.kubernetes.io/hostname: pgadmin.m0sh1.cc
    hosts:
      - host: pgadmin4.m0sh1.cc
        paths:
          - path: /
            pathType: Prefix
      - host: pgadmin.m0sh1.cc
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - pgadmin4.m0sh1.cc
          - pgadmin.m0sh1.cc
        secretName: wildcard-m0sh1-cc

  service:
    type: ClusterIP
    port: 80

  networkPolicy:
    enabled: true

  existingSecret: pgadmin-admin
  secretKeys:
    pgadminPasswordKey: password

  env:
    email: admin@m0sh1.cc

  persistentVolume:
    enabled: true
    storageClass: proxmox-csi-zfs-nvme-general-retain
    size: 5Gi

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  image:
    # Explicitly pin; avoids surprise upgrades when the upstream chart bumps appVersion.
    tag: "9.12.0"

  # The upstream chart defaults to aggressive probe timeouts which can be too
  # tight during first boot (PVC attach + DB init). Relax them to avoid flapping.
  startupProbe:
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 30

  readinessProbe:
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6

  livenessProbe:
    periodSeconds: 20
    timeoutSeconds: 5
    failureThreshold: 6

  nodeSelector:
    node-role.kubernetes.io/worker: "true"
  tolerations: []
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 80
          preference:
            matchExpressions:
              - key: topology.kubernetes.io/zone
                operator: In
                values: ["pve-01"]
        - weight: 60
          preference:
            matchExpressions:
              - key: topology.kubernetes.io/zone
                operator: In
                values: ["pve-02"]

  strategy:
    type: Recreate
