proxmox-csi-plugin:
  fullnameOverride: proxmox-csi-plugin

  options:
    enableCapacity: false

  controller:
    replicas: 2
    revisionHistoryLimit: 1
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

  node:
    kubeletDir: /var/lib/kubelet
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    # tolerations:
    #   - key: node-role.kubernetes.io/control-plane
    #     operator: Exists
    #     effect: NoSchedule
    #   - key: node-role.kubernetes.io/master
    #     operator: Exists
    #     effect: NoSchedule
    #   - key: node.kubernetes.io/unschedulable
    #     operator: Exists
    #     effect: NoSchedule
    #   - key: node.kubernetes.io/disk-pressure
    #     operator: Exists
    #     effect: NoSchedule

    # Disable chart-managed StorageClasses; we define them explicitly below.
  storageClass: []

# Wrapper-owned primitives (used by apps/cluster/proxmox-csi/templates/*)
proxmoxCsi:
  storageIds:
    pgdata: k8s-pgdata
    pgwal: k8s-pgwal
    registry: k8s-registry
    caches: k8s-caches
    minio: minio-data # MinIO on sata-ssd pool (128GB SSD per node, 1M recordsize)

  mountOptions:
  - noatime

  parameters:
    ssd: "true"

  snapshots:
    enabled: false
    deletionPolicy: Delete

  examples:
    enabled: false

backup:
  enabled: true
  volumeAttributesClass:
    name: proxmox-csi-backup
    parameters:
      backup: "true"
