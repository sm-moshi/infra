metallb: {}

# VLAN 30 pool: All exposed services (Ingress + LoadBalancers)
# Simplified single-pool design reduces ARP/L2 failure modes
# Traffic flow: Clients (any VLAN) → OPNsense routing → VLAN 30 VIP → K8s nodes (VLAN 20) → Pods
#
# K8s nodes on VLAN 20 advertise these IPs via L2, OPNsense routes between VLANs
pool:
  name: services-vlan30
  addresses:
    - 10.0.30.10-10.0.30.49

# L2 Advertisement for VLAN 30 pool
# MetalLB speakers (on K8s nodes) will ARP-respond for these IPs
advertisement:
  name: services-vlan30
  ipAddressPools:
    - services-vlan30
