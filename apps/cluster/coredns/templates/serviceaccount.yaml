{{- $root := . }}
{{- with $root.Values.coredns.serviceAccount }}
{{- if .create }}
apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ default (include "coredns.fullname" $root) .name }}
  namespace: {{ $root.Release.Namespace }}
  labels: {{- include "coredns.labels" $root | nindent 4 }}
  {{- if .annotations }}
  annotations:
{{ toYaml .annotations | indent 4 }}
  {{- end }}
---
{{- end }}
{{- end }}
