prometheus-pve-exporter:
  fullnameOverride: prometheus-pve-exporter

  image:
    registry: docker.io
    repository: prompve/prometheus-pve-exporter
    tag: "3.8.0"
    pullPolicy: Always

  env:
    pveAuthType: "token"
    pveUser: "pve-exporter@pve"
    pveExistingSecretName: "monitoring-pve-exporter"
    pveVerifySsl: false

  # NOTE: SecretKeyRef env vars are only read at pod start.
  # If you rotate/reseal `monitoring-pve-exporter`, bump this annotation to force a rollout.
  podAnnotations:
    m0sh1.cc/rollout: "2026-02-06"

  serviceMonitor:
    enabled: true
    additionalLabels:
      release: kube-prometheus-stack
    interval: 30s
    namespace: monitoring
    pveTargets:
      # NOTE: targets must be bare hosts/IPs (no scheme, no port).
      # If you include ":8006" the exporter will append another port and crash
      # with "Invalid IPv6 URL".
      - 10.0.10.11
      - 10.0.10.12
      - 10.0.10.13
